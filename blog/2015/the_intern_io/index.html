<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta http-equiv=content-security-policy content="upgrade-insecure-requests; block-all-mixed-content; default-src 'self'; child-src 'self'; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net/; form-action 'self'; frame-src 'self'; img-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/ https://cdn.jsdelivr.net/; script-src 'self' 'unsafe-inline' https://www.google-analytics.com https://cdn.jsdelivr.net/; prefetch-src 'self'; connect-src 'self' https://www.google-analytics.com;"><meta name=author content="Matt Brandt"><meta name=description content="A shared experiment    As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Make the intern do it"><meta name=twitter:description content="A shared experiment    As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><meta property="og:title" content="Make the intern do it"><meta property="og:description" content="A shared experiment    As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><meta property="og:type" content="article"><meta property="og:url" content="https://m8ttyb.github.io/blog/2015/the_intern_io/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2015-01-15T00:00:00+00:00"><meta property="article:modified_time" content="2015-01-15T00:00:00+00:00"><title>Make the intern do it · secretmustache</title><link rel=canonical href=https://m8ttyb.github.io/blog/2015/the_intern_io/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.d9fddbffe6f27e69985dc5fe0471cdb0e57fbf4775714bc3d847accb08f4a1f6.css integrity="sha256-2f3b/+byfmmYXcX+BHHNsOV/v0d1cUvD2Eesywj0ofY=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><meta name=generator content="Hugo 0.99.1"></head><body class="preload-transitions colorscheme-light"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>secretmustache</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/blog/>Blog</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://m8ttyb.github.io/blog/2015/the_intern_io/>Make the intern do it</a></h1></header><h2 class=date>January 15, 2015</h2><h2 id=a-shared-experiment>A shared experiment
<a class=heading-link href=#a-shared-experiment><i class="fa fa-link" aria-hidden=true></i></a></h2><p>As a QA team we had a difficult and challenging quarter to end 2014 on; that said,
the work with the <a href=https://developer.mozilla.org/>MDN</a> team was a personal highlight for me. A fulfilling way to cap
off the end of the year.</p><p>The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets.</p><p><a href=http://davidwalsh.name/>David Walsh</a> and I evaluated [theIntern.io(https://theintern.io/) as an alternative to our Python based
<a href=https://github.com/mozilla/mdn-tests/>suite of tests</a> that use WebDriver, Pytest, and <a href=https://github.com/mozilla/pytest-mozwebqa>pytest-mozwebqa</a>. The developers very much want to be involved in end-to-end testing using WebDriver as a browser automation tool but found the context switching between JavaScript and Python a distraction. <a href=https://quality.mozilla.org/teams/web-qa/>Web QA</a>
wanted our test cases to be more visible to the developers and block deployment if
regressions were introduced into the system.</p><h2 id=the-problems-we-wanted-to-address>The problem(s) we wanted to address:
<a class=heading-link href=#the-problems-we-wanted-to-address><i class="fa fa-link" aria-hidden=true></i></a></h2><ul><li>Scalability of test coverage - joint ownership of creation and maintenance of test cases.</li><li>Moving test runs further upstream in the build process - providing
quicker feedback.</li><li>Test runs and reports are hooked into a build process that the dev team
uses.</li></ul><h3 id=present>Present
<a class=heading-link href=#present><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Presently, Web QA’s MDN tests are Python based &ndash; <a href=https://github.com/mozilla/mdn-tests/>suite of tests</a> &ndash; and run on a <a href=http://jenkins-ci.org/>Jenkins</a> instance which is firewalled from the public. Both of these components make
accessing and monitoring our test runs complex and an event that is separate from the developer workflow.</p><p>Developer-level unit tests run on a TravisCI instance and presently there is no hook that runs the Python based end-to-end tests if their build passes. The end-to-end tests run on a cron job and can also be started by an <a href=https://github.com/mozilla/mozwebqa-bot>irc bot</a>.</p><p>Additionally, our Python-based tests live outside of the developers project: [github.com/mozilla/mdn-tests](<a href=https://github.com/mozilla/mdn-tests/>https://github.com/mozilla/mdn-tests/</a> and <a href=https://github.com/mozilla/kuma/>github.com/mozilla/kuma</a>. Adding an additional hurdle to maintainability and visibility.</p><h3 id=the-new>The New
<a class=heading-link href=#the-new><i class="fa fa-link" aria-hidden=true></i></a></h3><p>Working closely with the MDN team I helped identify areas that an end-to-end testing framework needed to take into account and solve. Between David’s and my experiences with testing we were able to narrow our search to a concise set of requirements.</p><p>Needs included:</p><ul><li>Uses real browsers &ndash; both on a test developer’s computer as well as the ability to use external services such as Sauce Labs.</li><li>Generate actionable reports that quickly identify why and where a regression occurred</li><li>An automatic mechanism that re-runs a test that fails due to a hiccup; such as network problems, etc.</li><li>Choose an open source project that has a vibrant and active community</li><li>Choose a framework and harness that is fun to use and provides quick results</li><li>Hook the end-to-end tests into the build process</li><li>Ability to run a single test case when developing a new testcase</li><li>Ability to multithread and run n tests concurrently</li></ul><p>David Walsh suggested <a href=https://theintern.io/>theIntern.io</a> and after evaluating it we quickly realized
that it hit all of our prerequites. I was quickly able to configure the
MDN travis-ci instance to use <a href=https://docs.saucelabs.com/ci-integrations/travis-ci/>SauceLabs</a>. Using the included <a href=https://theintern.github.io/digdug/index.html>DigDug</a> library
for tunneling, tests were quickly able to run on Sauce Lab’s infrastructure.</p><h3 id=outstanding-issues>Outstanding issues
<a class=heading-link href=#outstanding-issues><i class="fa fa-link" aria-hidden=true></i></a></h3><ul><li>The important <code>isDisplayed()</code> method of Intern&rsquo;s <a href=https://theintern.github.io/leadfoot/index.html>Leadfoot API</a>, paired with the polling function, returns inconsistent results. The cause may be as simple as we’re misusing <code>isDisplayed()</code> or polling. This will take more investigation.</li><li>Due to security restrictions Travis-CI cannot run end-to-end Webdriver based tests on a <a href=https://docs.travis-ci.com/user/pull-requests/#Security-Restrictions-when-testing-Pull-Requests>per pull request basis</a>. Test jobs are limited to merges to master only. We need to update the <a href=https://github.com/mdn/kuma/pull/2947/files>.travis.yaml</a> file to exclude the end-to-end tests when a pull request is made.</li><li>Refactor the current tests to use the Page Object Model. This was a fairly large deliverable to piece together and get working, thus David and I decided to not worry about best coding practices when trying to get a minimally viable example working.</li></ul><p>We’re well-positioned to see if Javascript-based end-to-end tests that block a build will provide positive benefits for a project.</p><h2 id=next-steps>Next Steps
<a class=heading-link href=#next-steps><i class="fa fa-link" aria-hidden=true></i></a></h2><p>Before the the team is ready to trust using Leadfoot and Digdug we need to
solve the outstanding issues. If you are intestested in gettin involved,
please let us know.</p><ul><li>Remove the sleep statements from the code base &ndash; this likely will involve better understanding how to use Promises.</li><li>Get an understanding why some tests fail when run against SauceLabs &ndash; the failures may be legitimate, we may be misusing the api, or their is a defect somewhere within the test harness.</li><li>Refactor tests to use the Page Object Model.</li></ul><p>After these few problems are solved, the team can include end-to-end into their
build process. This will allow timely and relevant per feature merge feedback
to developers on the project.</p></article></section></div><footer class=footer><section class=container>©
2013 -
2022
Matt Brandt
·
Powered by <a href=https://gohugo.io/>Hugo</a>.</section></footer></main><script src=/js/coder.min.8fb86376a16e684af472a329aef502dbebcfab65ce264e9750d144912947c602.js integrity="sha256-j7hjdqFuaEr0cqMprvUC2+vPq2XOJk6XUNFEkSlHxgI="></script></body></html>