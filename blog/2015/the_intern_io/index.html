<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Make the intern do it | SecretMustache</title>
<meta name=keywords content><meta name=description content="A shared experiment
As a QA team we had a difficult and challenging quarter to end 2014 on; that said,
the work with the MDN team was a personal highlight for me. A fulfilling way to cap
off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><meta name=author content="Matt Brandt"><link rel=canonical href=https://m8ttyb.github.io/blog/2015/the_intern_io/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://m8ttyb.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://m8ttyb.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://m8ttyb.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://m8ttyb.github.io/apple-touch-icon.png><link rel=mask-icon href=https://m8ttyb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://m8ttyb.github.io/blog/2015/the_intern_io/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://m8ttyb.github.io/blog/2015/the_intern_io/"><meta property="og:site_name" content="SecretMustache"><meta property="og:title" content="Make the intern do it"><meta property="og:description" content="A shared experiment As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2015-01-15T00:00:00+00:00"><meta property="article:modified_time" content="2015-01-15T00:00:00+00:00"><meta property="og:image" content="https://m8ttyb.github.io/images/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://m8ttyb.github.io/images/papermod-cover.png"><meta name=twitter:title content="Make the intern do it"><meta name=twitter:description content="A shared experiment
As a QA team we had a difficult and challenging quarter to end 2014 on; that said,
the work with the MDN team was a personal highlight for me. A fulfilling way to cap
off the end of the year.
The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://m8ttyb.github.io/blog/"},{"@type":"ListItem","position":2,"name":"Make the intern do it","item":"https://m8ttyb.github.io/blog/2015/the_intern_io/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Make the intern do it","name":"Make the intern do it","description":"A shared experiment As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.\nThe goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets.\n","keywords":[],"articleBody":"A shared experiment As a QA team we had a difficult and challenging quarter to end 2014 on; that said, the work with the MDN team was a personal highlight for me. A fulfilling way to cap off the end of the year.\nThe goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets.\nDavid Walsh and I evaluated theIntern.io as an alternative to our Python based suite of tests that use WebDriver, Pytest, and pytest-mozwebqa. The developers very much want to be involved in end-to-end testing using WebDriver as a browser automation tool but found the context switching between JavaScript and Python a distraction. Web QA wanted our test cases to be more visible to the developers and block deployment if regressions were introduced into the system.\nThe problem(s) we wanted to address: Scalability of test coverage - joint ownership of creation and maintenance of test cases. Moving test runs further upstream in the build process - providing quicker feedback. Test runs and reports are hooked into a build process that the dev team uses. Present Presently, Web QA’s MDN tests are Python based – suite of tests – and run on a Jenkins instance which is firewalled from the public. Both of these components make accessing and monitoring our test runs complex and an event that is separate from the developer workflow.\nDeveloper-level unit tests run on a TravisCI instance and presently there is no hook that runs the Python based end-to-end tests if their build passes. The end-to-end tests run on a cron job and can also be started by an irc bot.\nAdditionally, our Python-based tests live outside of the developers project: github.com/mozilla/mdn-tests and github.com/mozilla/kuma. Adding an additional hurdle to maintainability and visibility.\nThe New Working closely with the MDN team I helped identify areas that an end-to-end testing framework needed to take into account and solve. Between David’s and my experiences with testing we were able to narrow our search to a concise set of requirements.\nNeeds included:\nUses real browsers – both on a test developer’s computer as well as the ability to use external services such as Sauce Labs. Generate actionable reports that quickly identify why and where a regression occurred An automatic mechanism that re-runs a test that fails due to a hiccup; such as network problems, etc. Choose an open source project that has a vibrant and active community Choose a framework and harness that is fun to use and provides quick results Hook the end-to-end tests into the build process Ability to run a single test case when developing a new testcase Ability to multithread and run n tests concurrently David Walsh suggested theIntern.io and after evaluating it we quickly realized that it hit all of our prerequites. I was quickly able to configure the MDN travis-ci instance to use SauceLabs. Using the included DigDug library for tunneling, tests were quickly able to run on Sauce Lab’s infrastructure.\nOutstanding issues The important isDisplayed() method of Intern’s Leadfoot API, paired with the polling function, returns inconsistent results. The cause may be as simple as we’re misusing isDisplayed() or polling. This will take more investigation. Due to security restrictions Travis-CI cannot run end-to-end Webdriver based tests on a per pull request basis. Test jobs are limited to merges to master only. We need to update the .travis.yaml file to exclude the end-to-end tests when a pull request is made. Refactor the current tests to use the Page Object Model. This was a fairly large deliverable to piece together and get working, thus David and I decided to not worry about best coding practices when trying to get a minimally viable example working. We’re well-positioned to see if Javascript-based end-to-end tests that block a build will provide positive benefits for a project.\nNext Steps Before the the team is ready to trust using Leadfoot and Digdug we need to solve the outstanding issues. If you are intestested in gettin involved, please let us know.\nRemove the sleep statements from the code base – this likely will involve better understanding how to use Promises. Get an understanding why some tests fail when run against SauceLabs – the failures may be legitimate, we may be misusing the api, or their is a defect somewhere within the test harness. Refactor tests to use the Page Object Model. After these few problems are solved, the team can include end-to-end into their build process. This will allow timely and relevant per feature merge feedback to developers on the project.\n","wordCount":"769","inLanguage":"en","image":"https://m8ttyb.github.io/images/papermod-cover.png","datePublished":"2015-01-15T00:00:00Z","dateModified":"2015-01-15T00:00:00Z","author":{"@type":"Person","name":"Matt Brandt"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://m8ttyb.github.io/blog/2015/the_intern_io/"},"publisher":{"@type":"Organization","name":"SecretMustache","logo":{"@type":"ImageObject","url":"https://m8ttyb.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://m8ttyb.github.io/ accesskey=h title="SecretMustache (Alt + H)">SecretMustache</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://m8ttyb.github.io/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://m8ttyb.github.io/about title=About><span>About</span></a></li><li><a href=https://m8ttyb.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://github.com/m8ttyB/m8ttyb.github.io/wiki title=WiKi><span>WiKi</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://m8ttyb.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://m8ttyb.github.io/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Make the intern do it</h1><div class=post-meta><span title='2015-01-15 00:00:00 +0000 UTC'>January 15, 2015</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Matt Brandt&nbsp;|&nbsp;<a href=https://github.com/m8ttyb/m8ttyb.github.io/tree/main/content/blog/2015/the_intern_io.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#a-shared-experiment aria-label="A shared experiment">A shared experiment</a></li><li><a href=#the-problems-we-wanted-to-address aria-label="The problem(s) we wanted to address:">The problem(s) we wanted to address:</a><ul><li><a href=#present aria-label=Present>Present</a></li><li><a href=#the-new aria-label="The New">The New</a></li><li><a href=#outstanding-issues aria-label="Outstanding issues">Outstanding issues</a></li></ul></li><li><a href=#next-steps aria-label="Next Steps">Next Steps</a></li></ul></div></details></div><div class=post-content><h2 id=a-shared-experiment>A shared experiment<a hidden class=anchor aria-hidden=true href=#a-shared-experiment>#</a></h2><p>As a QA team we had a difficult and challenging quarter to end 2014 on; that said,
the work with the <a href=https://developer.mozilla.org/>MDN</a> team was a personal highlight for me. A fulfilling way to cap
off the end of the year.</p><p>The goal was to implement an experiment: convert several Python-based tests into JavaScript. Place these tests into the build process that the developers use and see what it nets.</p><p><a href=http://davidwalsh.name/>David Walsh</a> and I evaluated <a href=https://theintern.io/>theIntern.io</a> as an alternative to our Python based
<a href=https://github.com/mozilla/mdn-tests/>suite of tests</a> that use WebDriver, Pytest, and <a href=https://github.com/mozilla/pytest-mozwebqa>pytest-mozwebqa</a>. The developers very much want to be involved in end-to-end testing using WebDriver as a browser automation tool but found the context switching between JavaScript and Python a distraction. <a href=https://quality.mozilla.org/teams/web-qa/>Web QA</a>
wanted our test cases to be more visible to the developers and block deployment if
regressions were introduced into the system.</p><h2 id=the-problems-we-wanted-to-address>The problem(s) we wanted to address:<a hidden class=anchor aria-hidden=true href=#the-problems-we-wanted-to-address>#</a></h2><ul><li>Scalability of test coverage - joint ownership of creation and maintenance of test cases.</li><li>Moving test runs further upstream in the build process - providing
quicker feedback.</li><li>Test runs and reports are hooked into a build process that the dev team
uses.</li></ul><h3 id=present>Present<a hidden class=anchor aria-hidden=true href=#present>#</a></h3><p>Presently, Web QA’s MDN tests are Python based &ndash; <a href=https://github.com/mozilla/mdn-tests/>suite of tests</a> &ndash; and run on a <a href=http://jenkins-ci.org/>Jenkins</a> instance which is firewalled from the public. Both of these components make
accessing and monitoring our test runs complex and an event that is separate from the developer workflow.</p><p>Developer-level unit tests run on a TravisCI instance and presently there is no hook that runs the Python based end-to-end tests if their build passes. The end-to-end tests run on a cron job and can also be started by an <a href=https://github.com/mozilla/mozwebqa-bot>irc bot</a>.</p><p>Additionally, our Python-based tests live outside of the developers project: <a href=https://github.com/mozilla/mdn-tests/>github.com/mozilla/mdn-tests</a> and <a href=https://github.com/mozilla/kuma/>github.com/mozilla/kuma</a>. Adding an additional hurdle to maintainability and visibility.</p><h3 id=the-new>The New<a hidden class=anchor aria-hidden=true href=#the-new>#</a></h3><p>Working closely with the MDN team I helped identify areas that an end-to-end testing framework needed to take into account and solve. Between David’s and my experiences with testing we were able to narrow our search to a concise set of requirements.</p><p>Needs included:</p><ul><li>Uses real browsers &ndash; both on a test developer’s computer as well as the ability to use external services such as Sauce Labs.</li><li>Generate actionable reports that quickly identify why and where a regression occurred</li><li>An automatic mechanism that re-runs a test that fails due to a hiccup; such as network problems, etc.</li><li>Choose an open source project that has a vibrant and active community</li><li>Choose a framework and harness that is fun to use and provides quick results</li><li>Hook the end-to-end tests into the build process</li><li>Ability to run a single test case when developing a new testcase</li><li>Ability to multithread and run n tests concurrently</li></ul><p>David Walsh suggested <a href=https://theintern.io/>theIntern.io</a> and after evaluating it we quickly realized
that it hit all of our prerequites. I was quickly able to configure the
MDN travis-ci instance to use <a href=https://docs.saucelabs.com/ci-integrations/travis-ci/>SauceLabs</a>. Using the included <a href=https://theintern.github.io/digdug/index.html>DigDug</a> library
for tunneling, tests were quickly able to run on Sauce Lab’s infrastructure.</p><h3 id=outstanding-issues>Outstanding issues<a hidden class=anchor aria-hidden=true href=#outstanding-issues>#</a></h3><ul><li>The important <code>isDisplayed()</code> method of Intern&rsquo;s <a href=https://theintern.github.io/leadfoot/index.html>Leadfoot API</a>, paired with the polling function, returns inconsistent results. The cause may be as simple as we’re misusing <code>isDisplayed()</code> or polling. This will take more investigation.</li><li>Due to security restrictions Travis-CI cannot run end-to-end Webdriver based tests on a <a href=https://docs.travis-ci.com/user/pull-requests/#Security-Restrictions-when-testing-Pull-Requests>per pull request basis</a>. Test jobs are limited to merges to master only. We need to update the <a href=https://github.com/mdn/kuma/pull/2947/files>.travis.yaml</a> file to exclude the end-to-end tests when a pull request is made.</li><li>Refactor the current tests to use the Page Object Model. This was a fairly large deliverable to piece together and get working, thus David and I decided to not worry about best coding practices when trying to get a minimally viable example working.</li></ul><p>We’re well-positioned to see if Javascript-based end-to-end tests that block a build will provide positive benefits for a project.</p><h2 id=next-steps>Next Steps<a hidden class=anchor aria-hidden=true href=#next-steps>#</a></h2><p>Before the the team is ready to trust using Leadfoot and Digdug we need to
solve the outstanding issues. If you are intestested in gettin involved,
please let us know.</p><ul><li>Remove the sleep statements from the code base &ndash; this likely will involve better understanding how to use Promises.</li><li>Get an understanding why some tests fail when run against SauceLabs &ndash; the failures may be legitimate, we may be misusing the api, or their is a defect somewhere within the test harness.</li><li>Refactor tests to use the Page Object Model.</li></ul><p>After these few problems are solved, the team can include end-to-end into their
build process. This will allow timely and relevant per feature merge feedback
to developers on the project.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://m8ttyb.github.io/blog/2015/boulder_qa_meetup/><span class=title>« Prev</span><br><span>Boulder QA Meetup</span>
</a><a class=next href=https://m8ttyb.github.io/blog/2014/continous_delivery/><span class=title>Next »</span><br><span>Continuous Delivery Discussion</span></a></nav></footer></article></main><footer class=footer><span>© <a href=https://github.com/m8ttyB/>m8ttyb</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>